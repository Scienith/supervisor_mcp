{
  "identifier": "implementationPlan",
  "name": "实施分流计划",
  "stage": "planning",
  "description": "明确每个契约单元的下一跳与优先级，决定Stub→Fake还是直上Real",
  "outputs": [
    {
      "output_id": "b54d6607-4ef0-4533-877b-34cf67652256",
      "name": "实施计划文档",
      "description": "每个契约单元的实施路径和优先级规划",
      "path": "docs/IMPLEMENTATION_PLAN.md",
      "type": "FILE",
      "template_filename": "implementation-plan.md"
    },
    {
      "output_id": "e9bf6f31-5969-43af-83dd-c18a0baa089f",
      "name": "WIP看板配置",
      "description": "Work In Progress限制和任务跟踪配置",
      "path": "docs/WIP_BOARD.md",
      "type": "FILE",
      "template_filename": "wip-board.md"
    }
  ],
  "rules": [
    {
      "name": "实施路径决策",
      "when_condition": "确定契约单元实施策略时",
      "must": [
        "复杂功能优先选择Stub→Fake路径，便于可控测试",
        "需要故障注入和模拟的功能选择Fake实施",
        "明确且代码量≤500行的功能可直接Real实施",
        "外设交互简单的功能可直接Real实施",
        "需要快速跑通集成测试的功能优先Fake",
        "性能敏感的核心功能优先Real实施",
        "考虑团队技能和时间约束制定策略",
        "记录决策理由在notes或计划文档中"
      ],
      "must_not": [
        "不得忽略复杂度评估盲目选择实施路径",
        "不得同时开启过多契约单元的实施工作",
        "不得缺少明确的优先级排序",
        "不得忽略依赖关系影响实施顺序"
      ]
    },
    {
      "name": "WIP限制管理",
      "when_condition": "控制工作进度和质量时",
      "must": [
        "设置合理的WIP（Work In Progress）限额",
        "一次只推进少量契约单元保证质量",
        "确保团队聚焦，避免分散精力",
        "优先完成高优先级契约单元",
        "建立清晰的任务状态跟踪机制",
        "定期回顾和调整WIP限制",
        "阻塞问题优先解决，避免堆积"
      ],
      "must_not": [
        "不得同时进行过多并行开发",
        "不得忽略已开始任务的完成",
        "不得缺少进度可视化机制",
        "不得忽略团队协作和沟通"
      ]
    },
    {
      "name": "优先级和依赖管理",
      "when_condition": "排期和资源分配时",
      "must": [
        "高优先级：直接影响对外API的核心功能",
        "中优先级：支撑核心功能的基础能力",
        "低优先级：辅助功能和边缘情况处理",
        "考虑契约单元之间的依赖关系",
        "优先实施被多个单元依赖的基础能力",
        "确保关键路径上的功能优先完成",
        "留出缓冲时间处理意外问题",
        "平衡功能完整性和交付时间"
      ],
      "must_not": [
        "不得忽略依赖关系导致阻塞",
        "不得过分追求完美影响整体进度",
        "不得缺少风险评估和应对方案",
        "不得忽略团队能力和资源约束"
      ]
    }
  ],
  "step_id": "75f1b301-fb9a-47d4-909b-7b57ea9e8882"
}