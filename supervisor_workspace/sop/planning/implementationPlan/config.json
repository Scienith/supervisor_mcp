{
  "identifier": "implementationPlan",
  "name": "实施分流计划",
  "stage": "planning",
  "description": "明确每个契约单元的下一跳与优先级，决定Stub→Fake还是直上Real",
  "outputs": [
    {
      "name": "实施计划文档",
      "description": "每个契约单元的实施路径和优先级规划",
      "path": "docs/IMPLEMENTATION_PLAN.md",
      "type": "FILE",
      "template_filename": "implementation-plan.md",
      "template_content": "# 实施分流计划\n\n## 项目信息\n- 项目名称: [项目名称]\n- 计划制定日期: [日期]\n- 计划负责人: [负责人]\n- 预计完成时间: [时间范围]\n\n## 实施策略总览\n\n### 策略分类说明\n\n**Stub → Fake 路径**\n- 适用场景：复杂业务逻辑、需要可控测试、故障注入需求\n- 优点：快速验证集成、易于调试、支持各种测试场景\n- 缺点：需要两轮实施、增加维护成本\n\n**Stub → Real 直达路径**  \n- 适用场景：明确需求、简单实现（≤500行）、外设交互简单\n- 优点：一步到位、减少重复工作、真实环境验证\n- 缺点：实施周期长、调试复杂、依赖外部系统\n\n## 契约单元实施计划\n\n### 高优先级 (Sprint 1-2)\n\n#### [契约单元名1]\n- **当前状态**: STUB\n- **实施路径**: Stub → Fake → Real  \n- **选择理由**: 复杂的业务规则验证，需要多种测试场景\n- **预计工作量**: \n  - Fake实施: 3天\n  - Real实施: 5天\n- **关键里程碑**:\n  - [ ] 契约测试通过 (Day 3)\n  - [ ] 语义E2E通过 (Day 4) \n  - [ ] Real实施完成 (Day 8)\n- **风险点**: 外部API变更可能影响实施\n- **依赖**: 无\n- **负责人**: [开发者姓名]\n\n#### [契约单元名2]\n- **当前状态**: STUB\n- **实施路径**: Stub → Real\n- **选择理由**: 简单的数据转换功能，逻辑清晰直接\n- **预计工作量**: 2天\n- **关键里程碑**:\n  - [ ] 契约测试通过 (Day 2)\n  - [ ] 组件单测完成 (Day 2)\n- **风险点**: 无重大风险\n- **依赖**: [契约单元名1]\n- **负责人**: [开发者姓名]\n\n### 中优先级 (Sprint 3-4)\n\n#### [契约单元名3]\n- **当前状态**: STUB\n- **实施路径**: Stub → Fake → Real\n- **选择理由**: 需要与多个外部系统集成，故障场景复杂\n- **预计工作量**:\n  - Fake实施: 4天  \n  - Real实施: 6天\n- **关键里程碑**:\n  - [ ] Fake版本稳定 (Day 4)\n  - [ ] 集成测试通过 (Day 6)\n  - [ ] Real版本完成 (Day 10)\n- **风险点**: 外部系统不稳定，需要重试和降级机制\n- **依赖**: [契约单元名1]、[契约单元名2]\n- **负责人**: [开发者姓名]\n\n### 低优先级 (Sprint 5-6)\n\n#### [契约单元名4]\n- **当前状态**: STUB\n- **实施路径**: Stub → Real\n- **选择理由**: 辅助功能，实现简单\n- **预计工作量**: 1天\n- **关键里程碑**:\n  - [ ] 功能完成 (Day 1)\n- **风险点**: 无\n- **依赖**: 所有高优先级单元\n- **负责人**: [开发者姓名]\n\n## WIP限制策略\n\n### 并发限制\n- **最大并发契约单元数**: 3个\n- **每个开发者最大WIP**: 2个契约单元\n- **代码审查WIP**: 最多5个PR等待审查\n\n### 质量门控\n- **进入Fake阶段**: 契约测试骨架完成\n- **进入Real阶段**: Fake版本契约测试100%通过\n- **完成标准**: Real版本所有测试通过，代码审查完成\n\n### 阻塞处理\n- 技术阻塞：24小时内团队讨论解决方案\n- 依赖阻塞：优先级重新评估，考虑并行实施\n- 资源阻塞：及时调整人员分配或延期处理\n\n## 团队分工\n\n### 开发角色分配\n- **架构师**: [姓名] - 负责契约设计和技术决策\n- **高级开发**: [姓名] - 负责复杂契约单元实施  \n- **中级开发**: [姓名] - 负责中等复杂度契约单元\n- **初级开发**: [姓名] - 负责简单契约单元和测试\n\n### 专项负责\n- **测试策略**: [姓名] - 契约测试框架和E2E测试\n- **DevOps**: [姓名] - CI/CD和部署自动化\n- **文档**: [姓名] - API文档和使用指南\n\n## 里程碑和检查点\n\n### Sprint 1 检查点 (Week 2)\n- [ ] 所有高优先级契约单元开始实施\n- [ ] skeleton测试全部通过\n- [ ] 契约测试框架建立完成\n\n### Sprint 2 检查点 (Week 4)  \n- [ ] 至少50%高优先级单元完成Fake实施\n- [ ] 语义E2E测试覆盖主要API路径\n- [ ] 技术债务控制在可接受范围\n\n### Sprint 3 检查点 (Week 6)\n- [ ] 所有高优先级单元完成Real实施\n- [ ] 中优先级单元开始实施\n- [ ] 性能基准测试建立\n\n### 最终检查点 (Week 8)\n- [ ] 所有契约单元完成Real实施\n- [ ] 全套测试通过（单元、集成、E2E、契约）\n- [ ] 代码审查和重构完成\n- [ ] 文档和部署就绪\n\n## 风险管理\n\n### 技术风险\n| 风险项 | 影响程度 | 概率 | 缓解策略 | 负责人 |\n|--------|----------|------|----------|--------|\n| 外部API变更 | 高 | 中 | 抽象层隔离，及时跟进API变化 | [姓名] |\n| 性能不达标 | 中 | 低 | 早期性能测试，优化算法 | [姓名] |\n| 集成复杂度超预期 | 高 | 中 | Fake版本充分验证，逐步集成 | [姓名] |\n\n### 进度风险\n| 风险项 | 影响程度 | 概率 | 缓解策略 | 负责人 |\n|--------|----------|------|----------|--------|\n| 关键人员请假 | 高 | 低 | 知识共享，交叉培训 | [姓名] |\n| 需求变更 | 中 | 中 | 冻结核心API，控制变更范围 | [姓名] |\n| 第三方依赖延期 | 中 | 中 | Fake版本验证，并行开发 | [姓名] |\n\n### 质量风险\n| 风险项 | 影响程度 | 概率 | 缓解策略 | 负责人 |\n|--------|----------|------|----------|--------|\n| 测试覆盖不足 | 高 | 低 | 契约测试强制要求，自动化检查 | [姓名] |\n| 代码质量问题 | 中 | 中 | 代码审查，静态分析工具 | [姓名] |\n| 文档滞后 | 低 | 高 | 代码即文档，自动生成API文档 | [姓名] |\n\n## 成功标准\n\n### 功能完整性\n- [ ] 所有对外API功能完整实现\n- [ ] 契约测试100%通过\n- [ ] E2E测试覆盖主要业务场景\n\n### 代码质量\n- [ ] 代码覆盖率 ≥ 85%\n- [ ] 静态分析无严重问题\n- [ ] 代码审查完成率100%\n\n### 性能指标\n- [ ] API响应时间 ≤ 500ms (P95)\n- [ ] 系统吞吐量 ≥ 1000 QPS\n- [ ] 内存使用稳定，无泄漏\n\n### 可维护性\n- [ ] 代码结构清晰，职责分离\n- [ ] 文档完整，便于新人理解\n- [ ] 自动化测试覆盖完整\n\n## 变更记录\n\n| 日期 | 变更内容 | 变更原因 | 影响评估 | 负责人 |\n|------|----------|----------|----------|--------|\n| [日期] | [变更描述] | [变更原因] | [影响范围和程度] | [负责人] |"
    },
    {
      "name": "WIP看板配置",
      "description": "Work In Progress限制和任务跟踪配置",
      "path": "docs/WIP_BOARD.md",
      "type": "FILE",
      "template_filename": "wip-board.md",
      "template_content": "# WIP看板管理\n\n## 看板概述\nWork In Progress (WIP) 限制看板，用于控制开发流程中的并发任务数量，确保团队聚焦和质量。\n\n## WIP限制规则\n\n### 全局WIP限制\n- **最大同时进行的契约单元**: 3个\n- **最大待审查PR数量**: 5个  \n- **最大阻塞问题数量**: 2个\n\n### 个人WIP限制\n- **每人最大并发任务**: 2个契约单元\n- **每人最大待review代码**: 3个PR\n- **每人最大技术研究任务**: 1个\n\n### 团队角色WIP限制\n- **架构师**: 设计决策 1个 + 代码审查 3个\n- **高级开发**: 复杂实施 1个 + 指导 2个\n- **中级开发**: 标准实施 2个\n- **初级开发**: 简单实施 1个 + 学习 1个\n\n## 看板列设计\n\n```\nTODO | ANALYSIS | IN_PROGRESS | REVIEW | BLOCKED | DONE\n-----|----------|-------------|--------|---------|------\n ∞   |    3     |      5      |   5    |    2    |  ∞\n```\n\n### 列说明\n- **TODO**: 待开始的契约单元任务\n- **ANALYSIS**: 正在分析和设计的任务（WIP: 3）\n- **IN_PROGRESS**: 正在实施的任务（WIP: 5）\n- **REVIEW**: 等待代码审查的任务（WIP: 5）\n- **BLOCKED**: 被阻塞的任务（WIP: 2）\n- **DONE**: 已完成的任务\n\n## 任务卡片模板\n\n### 契约单元任务卡片\n```\n标题: [契约单元名] - [当前阶段]\n负责人: [开发者]\n优先级: High/Medium/Low\n预计工作量: [人天]\n当前状态: STUB/FAKE/REAL\n完成标准: \n- [ ] 契约测试通过\n- [ ] 代码审查通过  \n- [ ] 文档更新完成\n阻塞因素: [如有]\n依赖任务: [契约单元列表]\n```\n\n### 技术研究任务卡片\n```\n标题: [研究主题]\n负责人: [研究者]\n时间盒: [天数]\n目标: [研究目标和输出]\n完成标准:\n- [ ] 技术方案文档\n- [ ] 可行性验证\n- [ ] 团队分享完成\n```\n\n## 流转规则\n\n### 进入条件\n- **TODO → ANALYSIS**: 依赖任务完成，资源可用\n- **ANALYSIS → IN_PROGRESS**: 设计方案确认，WIP限制允许\n- **IN_PROGRESS → REVIEW**: 实施完成，自测通过  \n- **REVIEW → DONE**: 代码审查通过，测试验证通过\n- **任意状态 → BLOCKED**: 遇到阻塞问题\n\n### 退出条件\n- **BLOCKED → IN_PROGRESS**: 阻塞问题解决\n- **REVIEW → IN_PROGRESS**: 审查发现问题需修复\n- **ANALYSIS → TODO**: 设计方案不可行，需重新规划\n\n## 度量指标\n\n### 流程效率指标\n- **平均前置时间**: 从TODO到DONE的平均时间\n- **平均周期时间**: 从IN_PROGRESS到DONE的平均时间\n- **吞吐量**: 每周完成的任务数量\n- **WIP利用率**: 实际WIP vs 限制WIP的比率\n\n### 质量指标  \n- **返工率**: REVIEW→IN_PROGRESS的比率\n- **阻塞频率**: 任务被阻塞的频率\n- **一次通过率**: 直接从REVIEW到DONE的比率\n\n### 团队协作指标\n- **任务分布均衡度**: 各成员任务数量的分布\n- **知识共享度**: 跨人员的任务协作频率\n- **瓶颈识别**: 哪个阶段经常达到WIP限制\n\n## 日常运营\n\n### 每日站会检查项\n- [ ] 检查WIP限制是否超标\n- [ ] 识别新的阻塞问题\n- [ ] 确认任务优先级调整\n- [ ] 评估资源分配是否合理\n\n### 每周回顾检查项\n- [ ] 分析流程效率指标趋势\n- [ ] 识别重复出现的阻塞模式\n- [ ] 评估WIP限制是否合适\n- [ ] 调整下周的任务优先级\n\n### 阻塞问题处理流程\n1. **识别阻塞**: 任务超过预期时间未进展\n2. **分类阻塞**: 技术/资源/依赖/外部因素\n3. **制定方案**: 24小时内团队讨论解决方案\n4. **执行跟踪**: 每日检查解决进展\n5. **复盘改进**: 阻塞解决后分析根因和预防措施\n\n## 工具配置\n\n### 物理看板设置\n- 使用白板或贴纸墙\n- 不同颜色代表不同优先级\n- 清晰标记WIP限制数字\n- 定期更新任务状态\n\n### 数字化工具配置\n- **推荐工具**: Trello/Notion/Azure DevOps/Jira\n- **自动化规则**: WIP限制超标时自动提醒\n- **报表配置**: 每周自动生成效率报告\n- **集成配置**: 与Git/CI系统集成任务状态\n\n## WIP限制调整策略\n\n### 增加WIP限制的情况\n- 团队规模扩大\n- 任务复杂度降低\n- 外部依赖减少\n- 团队协作能力提升\n\n### 减少WIP限制的情况\n- 质量问题频发\n- 任务经常阻塞\n- 团队压力过大\n- 交付质量下降\n\n### 调整决策流程\n1. **数据分析**: 基于度量指标分析当前状况\n2. **团队讨论**: 听取团队成员反馈和建议\n3. **试验调整**: 小幅调整并观察效果\n4. **效果评估**: 2周后评估调整效果\n5. **正式确认**: 确认调整有效后正式实施\n\n## 成功案例模式\n\n### 高效流转模式\n- 任务拆分粒度合适（1-3天完成）\n- 依赖关系清晰，阻塞少\n- 代码审查及时响应\n- 测试自动化程度高\n\n### 避免的反模式\n- 任务粒度过大，长时间占用WIP\n- 同时开启过多任务，分散注意力\n- 忽略阻塞问题，任务堆积\n- 缺少明确的完成标准\n\n## 团队约定\n\n### 共同承诺\n- 严格遵守WIP限制，不超标开始新任务\n- 优先帮助解决阻塞问题\n- 及时更新任务状态\n- 主动沟通任务进展和困难\n\n### 例外处理\n- 紧急Bug修复可突破WIP限制\n- 阻塞解决任务优先级最高\n- 代码审查任务不占用个人WIP\n- 学习和培训任务单独管理\n\n## 变更记录\n\n| 日期 | 变更内容 | 变更原因 | 负责人 |\n|------|----------|----------|--------|\n| [日期] | 初始版本 | 建立WIP管理制度 | [负责人] |\n| [日期] | 调整WIP限制 | 基于实际运行数据优化 | [负责人] |"
    }
  ]
}